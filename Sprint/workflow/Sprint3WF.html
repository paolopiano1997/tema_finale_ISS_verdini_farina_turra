<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0129)http://htmlpreview.github.io/?https://github.com/anatali/iss2020LabBo/blob/master/it.unibo.issLabStart/userDocs/template2020.html -->
<html><!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/htmlpreview" src="../css/issStyle.js"></script>
--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">
<!--
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin: 10;
    margin-right: 15px;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
    border-bottom: 1px solid #242424;
}

h1 {
    font-size: 150%;
    background-color: #b2c0ff;
}

h2 {
    background-color: #d9fbff;
    font-size: 110%;
}

h3 {
	background-color: #e6ccff;
    font-size: 80%;
}
h4 {
    background-color: #99ffcc;
    font-size: 100%;
	width: 750px;
}
#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 80%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #ccffff;
    color: #0033cc;
}
bc{
	font-family: "Arial";
	font-size: 80%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
k{
	font-family: "Arial";
	font-weight: bold;
    color: #990000;
	 
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	 
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	 
}
pre{
	font-family: "Helvetica";
	font-size: 60%;
	background-color: #fcf8c7;
	border: 1px solid blue;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	width: 800px;
    font-size: 18px;
}    
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}       
div.remark{
	background-color: #FFFC33;     
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}  
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}         
    
  -->
</style>
    
<!--<base href="https://raw.githubusercontent.com/anatali/iss2020LabBo/master/it.unibo.issLabStart/userDocs/template2020.html">--><base href=".">
   
<title>Sprint 3</title></head>
    
<body>
<h2>Introduction</h2>
 The <em>manager</em> of a <em>tearoom</em> intends to regulate the access to the service by means of a ddr robot (<em>waiter</em>).
<br/><br/>
The <em>tearoom</em> is a rectangular room that includes:

<ul>
<li>an <em>entrancedoor</em> to enter in the room and an <em>exitdoor</em> to exit form it;</li>
<li>a number <tt>N (N=2)</tt> of <em>teatable</em>;</li>
<li>a <em>serviceare</em> including a <em>servicedesk</em> at which works a <em>barman</em>;</li>
<li>a <em>hall</em> equipped with a <em>presencedetector</em>, i.e. a device (e.g. a sonar) that can detect the presence of 
a person (or some other entity) in it.</li>
</ul>

The <em>waiter</em> can freely move along the borders of the tearoom, since there are no obstacles there. 

<center><img src="tearoom20.png" alt="tearoom20.png" width="75%" height="32%"/></center>


<h3>User stories</h3>
As a <em>client</em>:
<ul>
<li>I intend to <em>notify</em> my interest in <em>entering</em> in a <em>safe tearoom</em>, <em>sitting</em> at a free teatable,  <em>ordering</em> 
some tea,  <em>consuming</em> it  (within a limited amount of time <em>maxstaytime</em>)  <em>paying</em> the service
with my credit card and finally <em>leaving</em> the room.</li>
<li>For <em>safe tearoom</em>, I intend a tearoom with <em>clean</em> tea-tables posed at a proper distance; the room is populated by human clients 
whose body temperature is less than <tt>37.5</tt> degrees. </li>
<li>I can submit my notification of interest by hitting the <em>smartbell</em> located near the  <em>entrancedoor</em> 
that will automatically measure my body temperature and send a request message to the <em>waiter</em>, by giving to me an unique <em>clientidentifier</em>.
</li>
<li>I my body temperature is ok, but my request cannot be immediately satisfied (since the room is full), I will be <em>informed</em> by the <em>waiter</em> 
aabout the maximum waiting time.</li>
</ul>

As a <em>manager</em>:
<ul>
<li>I intend to be able to see the <em>current state</em> of the <em>tearoom</em> by using  a browser connected to a web-server 
associated to the application.
</li>
</ul>

 
<h2>Requirements</h2>
 
<div class="remark">
The <em>waiter</em> should perform the following tasks:
<ul>
 
<li><em>accept</em> the request of a client to enter in the tearoom if there is at least one teatable in the state <em>tablelean</em>, i.e.
the table is free and has been properly cleaned; </li>
<li><em>inform</em> the client about the maximum waiting time if there is no <em>tableclean</em>;</li> 
<li><em>reach</em> the <em>entrance door</em> and <em>convoy</em> the accepted client to the selected teatable;</li>
<li><em>take</em> the order of the client and transmit it (using a wifi-device) to the <em>barman</em>; </li>
<li><em>serve</em>  the client when the <em>barman</em> says that the requested drink is ready;</li>
<li><em>collect</em> the payment from the client when he/she has finished to consume or when the <em>maxstaytime</em> is expired;</li>
<li><em>convoy</em> the client to the <em>exitdoor</em>;</li>
<li><em>clean</em> the tea-table just freed  by the client;</li>
<li><em>rest</em> at my <em>home</em> when there is nothing to do.</li>
</ul>

Since the room could contain <tt>N</tt> clients at the time, the <em>waiter</em> should reduce as much as possible the waiting time
of the requests coming from each client.
   
<h3>Optional: one client in the hall</h3>
The <em>waiter</em> must open the <em>exitdoor</em> only when the hall is free, i.e. it must
not open that door if the hall is already engaged by a client waiting to enter at the <em>entrancedoor</em>.   

<h2>Non functional requirements</h2>  
<ol>
<li>The ideal work team is composed of 3 persons. Teams of 1 or 2 persons (<bc>NOT</bc> 4 or more) are also allowed. </li>
<li>The team must present a workplan as the result of the requirement/problem analysis,
including some significant <bc>TestPlan</bc>. </li>
<li>The team must present the sequence of SPRINT performed, with appropriate motivations.</li>
<li>The team must present (in synthetic, schematic way) the specific activity of each team-component.</li>
</ol>	

</div>
<h2>Requirement Analysis</h2>
<div class="remark">
<em>Maxstaytime</em>: Viene inteso come tempo che il cliente ha a disposizione per effettuare la sua consumazione nella <em>tearoom</em>.
Il suo funzionamente viene spiegato nelle <a href="./ConsiderazioniIniziali.html"><b>considerazioni iniziali</b></a><br><br>
<em>Smartbell</em>: Entità esterna alla tearoom atta a notificare l'intenzione di un cliente ad entrare nella sala da the.
	I suoi compiti sono di misurare la temperatura del cliente e nel caso sia inferiore a 37.5 gradi assegnargli un identificativo univoc e notificare il waiter.<br><br>
<em>Clientidentifier</em>: Rappresenta un ID univoco assegnato ai clienti dalla smartbell in caso di almento un tavolo libero e clean<br><br>
<em>inform</em>: Azione svolta dal waiter atta ad informare il cliente del tempo massimo di attesa prima che un tavolo risulti nuovamente clean<br><br>
<em>Current state</em>: Rappresenta lo stato della <em>tearoom</em>, viene definito dallo stato dei tavoli (occupied, dirty, clean...), dallo stato del waiter e dallo stato del barman.<br><br>
per altri termini, link agli sprint precedenti<br><br>
<b>VECCHIE ASSUNZIONI</b> 
<ul>
<li>Nel sistema esistono solo due clienti, un cliente entra quando il waiter sta facendo il clean.
Il secondo cliente non interagisce.</li>
</ul>
<b>NUOVE ASSUNZIONI</b>
<ul>
<li>il barman prepara un ordine alla volta</li>
<li>i tempi di preparazione sono sempre gli stessi</li>
<li>il cliente suona una volta sola e aspetta il suo turno.</li>
</ul>
//Analizzare le nuove casistiche in cui ci troviamo, non descrizione delle situazioni<br>
Reminder: ricordiamoci di effettuare <b>l'analisi dei termini dei requisiti.</b></br>
Introduciamo una piccola analisi su come le entità dovrebbero essere.</br>
Link ai QAK di nuovo anche se già lo abbiamo fatto.</br>
Spiegare il perchè attori.</br>
Se riusciamo, COAP request via browser/plugin da fargli vedere
</br></br>
</div>

<h2>Problem analysis</h2> 
<div class="remark">
</br>
<b>Prolematiche sorte a seguito dell'analisi dei requisiti</b>
<ul>
	<li><b>Problema 1</b>: Gestione delle richieste da tavoli differenti:
            Il waiter ha la necessità di sapere a che tavolo portare l'ordinazione. Necessità di tenere traccia dell'importo
            da pagare per ciascun cliente.
			</li>
	<br>    
	<li><b>Problema 2</b>: Interruzione del clean solo se c'è un altro tavolo disponibile: nello sprint precedente abbiamo assunto
    che vi fosse solo un cliente alla volta nella tearoom, quindi questo problema non si presentava.
    Task clean -> diventa interrompibile se sto pulendo il tavolo e l'altro è occupato.</li>
	<br>
	<li><b>Problema 3</b>: il tempo trascorre solo quando è responsabilità del cliente ovvero nel suo turno.
		Per tale motivo sorge la problematica in cui il cliente richiede o di ordinare o il conto mentre il waiter sta gia facendo un'azione , 
		La richiesta sarà gestita solo quando l'azione corrente si conclude e quindi il tempo viene fermato solo dopo aver ultimato quell'azione.
		Il tempo che intercorre tra la richiesta del cliente e l'azione del waiter in risposta alla richiesta viene considerato trascurabile, 
	</li>
	<br>
	<li><b>Problema 4</b>: 
		Se i due clienti sono entrati e non ordinano, i timer sono entrambi attivi, questo scenario introduce la necessità di gestire più "entità" timer contemporaneamente.
		Diventa opportuno introdurre un'entità intermedia, la quale spartisce le interazioni tra waitermind e i vari timer di ciascun cliente. Così facendo,
		introduciamo un livello a metà che gestisce le richiesta dal waitermind alle varie entità timer, ciò risulta in maggiore scalabilità e riusabilità di waitermind
	</li>
	<br>
	<li><b>Problema 5</b>: Gestione dei tempi di attesa per l'azione di <em>inform</em> a seguito del rilassamento sui vincoli sul numero di clienti presenti nel sistema (interni ed esterni alla tearoom). 
		Esistono 3 situazioni in cui si può trovare la tearoom,<br>
		   &ensp;&ensp;- Due tavoli non cleaned : min{cleaningTimeTable1,cleaningTimeTable2}<br>
		   &ensp;&ensp;- Un tavolo non cleaned e un cliente dentro : azione del waiter rivolte ai clienti più prioritari, remainingClientTime<br>
		   &ensp;&ensp;- Due clienti dentro la tearoom : min{remainingClientTime1,remainingClientTime2} <br>
		   cleaningTimeTable definito come il tempo residuo per la pulizia del tavolo, <br>
		   remainingClientTime definito come il tempo residuo del cliente per il suo staytime.
	</li><br>
	<li><b>Problema 6</b>: Gestione del current state:
		Dalla gestione dello stato globale della stanza è nata la necessità di introdurre un'entità che gestisca lo stato sulla base di conoscenza per questioni di modularità, un unico observer per lo stato della stanza.
		Quindi, sono stati modellati i teatables in modo da gestire lo stato dei tavoli, è opportuno rimodellare tale entità, inglobando la gestione degli stati
		anche del waiter e del barman, per avere un unico punto di accesso per le informazioni. Accesso alle risorse mediante COAP request via browser/plugin <u>perchè</u>
	</li><br></ul>
	<b> Descrizione formale delle entità a seguito della descrizione delle problematiche</b><br><br>
		<ul>Valore maxstaytime: valore utilizzato per rappresentare la quantità massima di tmpo a cui un cliente è permesso soggiornare nella tearoom. 
		Questo valore è incrementale nel tempo ed è rappresentato simil contatore il cui valore massimo che potrà raggiungere sarà maxstaytime. 
		Durante il turno di decisione del cliente, il contatore verrà attivato e contestualmente verrà bloccato una volta fatta la richiesta da ciente a waiter.<br><br>
		Entità smartbell: viene modellata come un attore qak, vedi scelta modelli in <a href="./../SprintIniziale/SprintIniziale.html"><b>considerazioni iniziali</b></a> che 
		invia un messaggio di request-reply al waiter per l'ingresso di un cliente, il waiter risponderà in caso di accettazione di richiesta di entrata mediante un 
		identificativo univoco rappresentante il cliente o in caso contrario (rifiuto per mancanza di tavoli liberi) con un inform rappresentante il tempo di attesa prima 
		di un ingresso.<br><br>
		Identificativo clientidentifier: valore numerico univoco per cliente, generato da waiter a seguito di una richiesta di ingresso mediante smartbell del cliente, 
		identificativo iviato come reply alla richiesta di ingresso.<br><br>
		Inform: task che consiste in una reply fatta a seguito di una richiesta di ingresso da parte di un cliente in caso di tearoom sprovvista di tavoli cleaned.
		La reply contiene al suo interno un valore numerico corrispondente ai numeri di secondi di attesa massimi per l'ingresso del cliente. (Problema 5) <br> <br>
		Currenti state: stato della tearoom ricavato dall'attore tearoom state. (Problema 6)  <br><br>
		</ul>
<b>Dato il rilassamento delle assunzioni rispetto agli sprint precedenti, sorte nuove situazioni</b>
<ul>
	<li>Situazione 1: gestione di più clienti contemporaneamente e delle loro rispettive richieste.</li>
    <li>Situazione 2: un cliente non viene ammesso perchè la sua temperatura è superiore a 37,5°.</li>
    <li>Situazione 3: un cliente esaurisce il <em>maxstaytime</em> e quindi viene richiesto 
    il pagamento dal waiter e viene accompagnato all'uscita.</li><br>
</ul>

<!--</br>
</br> Per ottenere lo stato della stanza completo, potrebbe essere necessario introdurre un attore che lo inglobi.
Ad ogni cambiamento, messaggio a questo attore. Questo attore fa "updateResource" dello stato. Poi è accessibile tramite COAP.
(Letto nella documentazione di QAK).<br><br>--> 
<b>SVILUPPI FUTURI</b>
<ol>
    <li>Il barman potrebbe preparare due ordini insieme, presumibilmente uguali, quindi
    il waiter potrebbe portare direttamente gli ordini ad entrambi i tavoli.</li>
    <li>Opzionale: Nella hall ci può essere al più una persona</li>
    <li>Problema 1: Se il cliente suona ma poi se ne va?</li>
    <li>Problema 2: Se il cliente suona 400 volte?</li>
    <li>Tenere una cassa: dove i pagamenti dei clienti si sommano e si mostra il guadagno giornaliero.</li>
    <li>Tenere un menù con la lista dei prezzi e in base all'ordine variare la somma da pagare</li>
</ol>
<b>TEST PLAN</b><br>
Testiamo la corretta funzione delle situazioni 1,2,3 e 4. Vedi analisi requisiti.
<ul>
<li>Simuliamo più clienti che richiedono l'accesso alla <em>tearoom</em> e alla fine dell'esecuzione l'ingresso si deve essere
svuotato.</li>
<li>Verifichiamo che venga portata a termine la catena completa degli eventi per due clienti nella tearoom contemporaneamente</li>
<li>Verifichiamo che se un cliente ha temperatura > 37,5° non venga accettato nella <em>tearoom</em></li>
<li>Simuliamo un cliente che esaurisca il <em>maxstaytime</em> e di conseguenza verifichiamo che il waiter
richieda il pagamento e lo accompagni fuori.</li>
</ul>
</div>	

<h2>Sprint review</h2> 
<div class="remark">

</div>

<h2>Sprint retrospective</h2> 
<div class="remark">

</div>

</div>



<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">

<img src="../Foto.jpg" alt="mbot" width="20%" height="15%">
<img src="../angelo.jpeg" alt="mbot" width="20%" height="15%">
<img src="../lonza.jpeg" alt="mbot" width="20%" height="15%">
<hr>
Paolo Verdini, 	Angelo Farina, 	Riccardo Turra
<hr>
paolo.verdini@studio.unibo.it, angelo.farina@studio.unibo.it, riccardo.turra@studio.unibo.it


</div> 

</body></html>